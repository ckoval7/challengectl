---
# ChallengeCtl Server Configuration Example
# Copy this file to server-config.yml and customize for your deployment

server:
  bind: "0.0.0.0"
  port: 8443

  # TLS/SSL Configuration (optional)
  # Option 1: Leave empty and use nginx for TLS termination (recommended for production)
  # Option 2: Specify certificate paths for direct HTTPS (good for development/testing)
  tls:
    cert: ""  # Path to SSL certificate file (e.g., /etc/challengectl/server.crt)
    key: ""   # Path to SSL private key file (e.g., /etc/challengectl/server.key)

  # API keys for runner authentication
  # Each runner should have a unique API key
  # Format: runner_id: api_key
  api_keys:
    # Runner API keys
    runner-1: "CHANGE-THIS-runner-1-key-abc123"
    runner-2: "CHANGE-THIS-runner-2-key-def456"
    runner-3: "CHANGE-THIS-runner-3-key-ghi789"

    # Admin API key for WebUI access
    admin: "CHANGE-THIS-admin-key-xyz999"

  # File storage settings
  files_dir: "files"

  # Runner heartbeat settings (seconds)
  heartbeat_timeout: 90      # Mark runner offline after this many seconds
  assignment_timeout: 300    # Requeue challenge after this many seconds (5 minutes)

# Conference settings
conference:
  name: "ExampleCon 2025"
  start: "2025-04-05 09:00:00 -5"
  stop: "2025-04-07 18:00:00 -5"
  timezone: "America/New_York"

# Challenge definitions
# Same format as standalone challengectl-v2 config
challenges:
  # Default delays that apply to all challenges unless overridden
  - default_min_delay: 60  # Seconds
    default_max_delay: 90  # Seconds

  # NBFM Example
  - name: NBFM_FLAG_1
    frequency: 146550000  # Hz (146.550 MHz)
    modulation: nbfm
    flag: challenges/examples/example_voice.wav
    wav_samplerate: 48000
    min_delay: 60
    max_delay: 90
    enabled: true

  # CW (Morse Code) Example
  - name: CW_MORSE_1
    frequency: 146450000  # Hz (146.450 MHz)
    modulation: cw
    flag: 'CQ CQ CQ DE RFCTF K'
    speed: 35  # WPM
    min_delay: 60
    max_delay: 90
    enabled: true

  # SSB (Single Sideband) Example
  - name: SSB_FLAG_1
    frequency: 146600000  # Hz (146.600 MHz)
    modulation: ssb
    mode: usb  # or 'lsb'
    flag: challenges/examples/example_voice.wav
    wav_samplerate: 48000
    min_delay: 60
    max_delay: 90
    enabled: true

  # ASK (Amplitude Shift Keying) Example
  - name: ASK_FLAG_1
    frequency: 146700000  # Hz (146.700 MHz)
    modulation: ask
    flag: 'flag{this_is_ask_data}'
    min_delay: 60
    max_delay: 90
    enabled: true

  # POCSAG Pager Example
  - name: POCSAG_FLAG_1
    frequency: 146800000  # Hz (146.800 MHz)
    modulation: pocsag
    flag: 'POCSAG message with flag'
    capcode: 123456
    min_delay: 60
    max_delay: 90
    enabled: true

  # FHSS (Frequency Hopping) Example
  - name: FHSS_FLAG_1
    frequency: 146550000  # Hz (base frequency)
    modulation: fhss
    flag: challenges/examples/example_voice.wav
    channel_spacing: 10000  # Hz
    hop_rate: 10  # hops per second
    hop_time: 60  # seconds
    seed: RFHS
    wav_samplerate: 48000
    min_delay: 120
    max_delay: 180
    enabled: true

  # LRS Pager Example
  - name: LRS_FLAG_1
    frequency: 146900000  # Hz (146.900 MHz)
    modulation: lrs
    flag: '-s 10 -p 976 -pf 1'
    min_delay: 60
    max_delay: 90
    enabled: true

# Note: Challenge files (WAV, etc.) should be placed in the server's files directory
# or referenced with relative paths from the server directory
