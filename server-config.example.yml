---
# ChallengeCtl Server Configuration Example
# Copy this file to server-config.yml and customize for your deployment

server:
  bind: "0.0.0.0"
  port: 8443

  # CORS allowed origins for web UI access (SECURITY CRITICAL)
  # List all domains that should be allowed to make authenticated requests
  # Leave empty or comment out to use localhost defaults (development only)
  # Examples:
  #   - Production: https://challengectl.example.com
  #   - Multiple origins for load balancers or CDNs
  # NEVER use wildcards (*) with credentials - major security risk!
  cors_origins:
    - "https://challengectl.example.com"    # Production domain
    - "https://www.challengectl.example.com" # WWW alias
    # - "http://localhost:5173"  # Uncomment for local development
    # - "http://localhost:5000"

  # Alternative: Set via environment variable
  # CHALLENGECTL_CORS_ORIGINS="https://challengectl.example.com,https://www.challengectl.example.com"

  # Runner API keys are NOT stored in this file!
  # Runners use a secure enrollment process:
  #   1. In the Web UI, go to Runners page and click "Add Runner"
  #   2. Generate an enrollment token and API key
  #   3. Copy the token and API key to your runner configuration
  #   4. Start the runner - it will automatically enroll
  #   5. API keys are stored bcrypt-hashed in the database with host validation

  # File storage settings
  files_dir: "files"

  # Runner heartbeat settings (seconds)
  heartbeat_timeout: 90      # Mark runner offline after this many seconds
  assignment_timeout: 300    # Requeue challenge after this many seconds (5 minutes)

# Conference settings
conference:
  name: "ExampleCon 2025"
  start: "2025-04-05 09:00:00 -5"
  stop: "2025-04-07 18:00:00 -5"
  timezone: "America/New_York"

# Named Frequency Ranges
# Define frequency ranges that can be used for random frequency selection
# When a challenge uses a named range, a random frequency will be selected within that range
frequency_ranges:
  - name: "ham_50"
    display_name: "6 Meter Ham Band"
    description: "6m Amateur Radio Band (50-54 MHz)"
    min_hz: 50000000
    max_hz: 54000000

  - name: "ham_144"
    display_name: "2 Meter Ham Band"
    description: "2m Amateur Radio Band (144-148 MHz)"
    min_hz: 144000000
    max_hz: 148000000

  - name: "ham_220"
    display_name: "1.25 Meter Ham Band"
    description: "1.25m Amateur Radio Band (222-225 MHz)"
    min_hz: 222000000
    max_hz: 225000000

  - name: "ham_440"
    display_name: "70 Centimeter Ham Band"
    description: "70cm Amateur Radio Band (420-450 MHz)"
    min_hz: 420000000
    max_hz: 450000000

  - name: "ham_900"
    display_name: "33 Centimeter Ham Band"
    description: "33cm Amateur Radio Band (902-928 MHz)"
    min_hz: 902000000
    max_hz: 928000000

  - name: "ham_1200"
    display_name: "23 Centimeter Ham Band"
    description: "23cm Amateur Radio Band (1.24-1.3 GHz)"
    min_hz: 1240000000
    max_hz: 1300000000

  - name: "wbfm"
    display_name: "FM Radio Broadcast"
    description: "Wideband FM Broadcast Band (88.1-107.9 MHz)"
    min_hz: 88100000
    max_hz: 107900000

  - name: "ism_433"
    display_name: "433 MHz ISM Band"
    description: "433 MHz ISM Band (433.05-434.79 MHz)"
    min_hz: 433050000
    max_hz: 434790000

# Challenge Configuration
# Challenges are configured through the Web UI at /challenge-config
# Navigate to "Configure Challenges" in the web interface to:
#   - Create challenges with a guided form
#   - Import challenges from YAML files with file uploads
#   - Edit and delete existing challenges
#
# You can also configure challenges in this file if preferred.
# See https://github.com/ckoval7/challengectl/wiki/Challenge-Management for details.
#
# Example challenge configuration (commented out):
# challenges:
#   # NBFM Example with specific frequency
#   - name: NBFM_FLAG_1
#     frequency: 146550000  # Hz (146.550 MHz)
#     modulation: nbfm
#     flag: challenges/examples/example_voice.wav
#     wav_samplerate: 48000
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # NBFM Example with named frequency range (random frequency selected from range)
#   - name: NBFM_FLAG_2
#     frequency_ranges:  # Use one or more named ranges
#       - ham_144
#       - ham_220
#     modulation: nbfm
#     flag: challenges/examples/example_voice.wav
#     wav_samplerate: 48000
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # CW (Morse Code) Example
#   - name: CW_MORSE_1
#     frequency: 146450000  # Hz (146.450 MHz)
#     modulation: cw
#     flag: 'CQ CQ CQ DE RFCTF K'
#     speed: 35  # WPM
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # SSB (Single Sideband) Example
#   - name: SSB_FLAG_1
#     frequency: 146600000  # Hz (146.600 MHz)
#     modulation: ssb
#     mode: usb  # or 'lsb'
#     flag: challenges/examples/example_voice.wav
#     wav_samplerate: 48000
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # ASK (Amplitude Shift Keying) Example
#   - name: ASK_FLAG_1
#     frequency: 146700000
#     modulation: ask
#     flag: 'flag{this_is_ask_data}'
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # POCSAG Pager Example
#   - name: POCSAG_FLAG_1
#     frequency: 146800000
#     modulation: pocsag
#     flag: 'POCSAG message with flag'
#     capcode: 123456
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # FHSS (Frequency Hopping) Example
#   - name: FHSS_FLAG_1
#     frequency: 146550000  # Base frequency
#     modulation: fhss
#     flag: challenges/examples/example_voice.wav
#     channel_spacing: 10000  # Hz
#     hop_rate: 10  # hops per second
#     hop_time: 60  # seconds
#     seed: RFHS
#     wav_samplerate: 48000
#     min_delay: 120
#     max_delay: 180
#     enabled: true
#
#   # LoRa Example
#   - name: LORA_FLAG_1
#     frequency: 146900000
#     modulation: lrs
#     flag: challenges/lora_data.bin
#     spreading_factor: 7
#     bandwidth: 125000
#     coding_rate: '4/5'
#     min_delay: 60
#     max_delay: 90
#     enabled: true
#
#   # FreeDV Digital Voice Example
#   - name: FREEDV_FLAG_1
#     frequency: 147100000
#     modulation: freedv
#     mode: usb
#     flag: challenges/examples/example_voice.wav
#     wav_samplerate: 48000
#     min_delay: 60
#     max_delay: 90
#     enabled: true
